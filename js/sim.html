<meta charset="utf-8"/>
<style type="text/css">
</style>

<title>Microcode simulator</title>
<p>
<!--
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
-->
<script src="jquery.min.js"></script>
<script src="io.js"></script>
<script src="decode.js"></script>
<script src="engine.js"></script>
<script src="sim.js"></script>
<style type="text/css">
#wrapper { position:relative; width:800px; height: 800px;}
.layer { position:absolute; top: 0px; left: 0px; width:800px; height: 800px;}
.elt { position:absolute; font-size: 80%; font-family: sans-serif; text-align:center;}
.elt div { font-size: 120%; font-family: monospace; border: 1px solid #fff; white-space:nowrap}
.elt div div { border: none;}
#regbox div {padding: 0 10px;}
#regbox div div {border: 1px solid green;}
.label { position:absolute; font-family: monospace}
.hilite { background-color: yellow; }
</style>
</head>
<body>
<button id="control">Stop</button>
<button id="step">Step</button>
<button id="skip">Skip</button>
&nbsp;Next addr: <input type="text" id="addr" value="0240" style="width:4em"></input>
Op count: <span style="margin-left: 20px;font-family:sans-serif;font-size:80%;" id="count">0</span>
<div id="wrapper">
  <canvas class="layer" style="z-index:-1;" id="can"></canvas>
  <div id="data" class="layer">
    <div id="FNc" class="elt" style="top:10px;left:350px;">LSFR
      <div id="FN">3</div>
    </div>
    <div id="Jc" class="elt" style="top:10px;left:400px;">J
      <div id="J">3</div>
    </div>
    <div id="LSARc" class="elt" style="top:55px;left:350px;">LSAR
      <div id="LSAR">13</div>
    </div>
    <div id="LSc" class="elt" style="top:90px;left:20px;min-width:48;">Local Storage
      <div style="border: 1px solid #ccc; font-size: 60%;">
        <div id="LS0">L123</div>
        <div id="LS1">L123</div>
        <div id="LS2">L123</div>
        <div id="LS3">L123</div>
      </div>
    </div>
    
    <div id="storage">
    </div>

    <div id="regbox" class="elt" style="display:flex;justify-content:space-between;top:200px;left:100px;position:absolute;">
      <div id="PSWc"  style=""><span>PSW</span>

        <div style="font:100%">MK K AMWP ILC CC  Prog Mask</div>
        <div id="PSW">00 1   2  3   4     5</div>
      </div>
      <div id="Lc"  style=""><span>L Register</span>
        <div id="L">L123</div>
      </div>
      <div id="Rc"  style="">R Register
        <div id="R">L123</div>
      </div>
      <div id="MDc"  style="">MD
        <div id="MD">3</div>
      </div>
      <div id="Fc"  style="">F
        <div id="F">3</div>
      </div>
      <div id="Qc"  style="">Q
        <div id="Q">3</div>
      </div>
      <div id="Mc"  style="">M
        <div id="M">00112233</div>
      </div>
      <div id="Hc"  style="">H
        <div id="H">00112233</div>
      </div>
    </div>
    <div class="elt" style="top:350px">
    T: <span id="T"></span>
    IA: <span id="IA"></span>
    XG: <span id="XG"></span>
    Y: <span id="Y"></span>
    U: <span id="U"></span>
    V: <span id="V"></span>
    W: <span id="W"></span>
    S: <span id="S"></span>
    G1: <span id="G1"></span>
    G2: <span id="G2"></span>
    LB: <span id="LB"></span>
    MB: <span id="MB"></span>
    SP: <span id="SP"></span>
    </div>
    <div class="elt" style="top:377px">
    </div>

    <div class="elt" style="top: 400px;display:block;">Microcode
    <div id="div2" style="white-space:pre;"/></div>
    <div id="div3" style="white-space:pre;"/></div>
  </div>
</div>
<pre id="div"></pre>
